<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auvex Protocol | Autonomous Wealth Generation</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bignumber.js@9.1.2/bignumber.min.js"></script>

    <style>
        :root {
            --bg-deep: #0f0500;
            --burnt-orange: #cc4400;
            --amber: #ffbf00;
            --soft-gold: #ffdf80;
            --card-bg: rgba(30, 10, 0, 0.9);
            --glass-border: rgba(255, 191, 0, 0.2);
            --text-main: #fffaf0;
            --gradient-premium: linear-gradient(135deg, #cc4400 0%, #ffbf00 50%, #ffdf80 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(204, 68, 0, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(255, 191, 0, 0.1) 0%, transparent 40%);
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* Header */
        header {
            height: 90px;
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            background: rgba(15, 5, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--glass-border);
        }

        nav { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo { font-family: 'Space Grotesk', sans-serif; font-size: 2rem; font-weight: 800; background: var(--gradient-premium); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .nav-links { display: flex; gap: 25px; list-style: none; }
        .nav-links a { text-decoration: none; color: var(--text-main); font-weight: 500; font-size: 0.95rem; transition: 0.3s; cursor: pointer; }
        .nav-links a:hover { color: var(--amber); }

        .btn-connect {
            background: var(--gradient-premium);
            border: none;
            padding: 10px 24px;
            border-radius: 12px;
            font-weight: 600;
            color: #000;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(204, 68, 0, 0.3);
        }
        .btn-connect:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 191, 0, 0.4); }

        /* Hero Section */
        .hero { padding: 120px 0 80px; text-align: center; }
        .hero h1 { font-family: 'Space Grotesk', sans-serif; font-size: 4rem; line-height: 1.1; margin-bottom: 20px; }
        .hero span { background: var(--gradient-premium); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { font-size: 1.25rem; color: #ccc; max-width: 700px; margin: 0 auto 40px; }

        /* General Section Styling */
        .section-header { text-align: center; margin-bottom: 50px; }
        .section-header h2 { font-size: 2.5rem; color: var(--amber); margin-bottom: 10px; }
        .section-header p { color: #aaa; }

        /* Investment Cards/Forms */
        .invest-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 60px; }
        @media (max-width: 768px) { .invest-grid { grid-template-columns: 1fr; } }

        .premium-card {
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            position: relative;
            overflow: hidden;
        }
        .premium-card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: var(--gradient-premium); }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 10px; font-weight: 600; color: var(--soft-gold); }
        .input-wrapper { position: relative; }
        .input-wrapper input, .input-wrapper select {
            width: 100%;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            padding: 15px;
            border-radius: 12px;
            color: #fff;
            font-size: 1rem;
        }
        .input-wrapper input[readonly] { background: rgba(0,0,0,0.3); color: #888; }

        .btn-action {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: none;
            background: var(--gradient-premium);
            color: #000;
            font-weight: 800;
            font-size: 1.1rem;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: 0.3s;
        }
        .btn-action:disabled { filter: grayscale(1); cursor: not-allowed; }

        /* Dashboard Table */
        .dashboard-container { margin-top: 40px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th { background: rgba(204, 68, 0, 0.2); color: var(--amber); text-align: left; padding: 15px; font-size: 0.9rem; text-transform: uppercase; }
        td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.95rem; }

        /* Referral & Levels */
        .referral-stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }
        .stat-box { background: rgba(255,255,255,0.03); padding: 20px; border-radius: 16px; text-align: center; border: 1px solid var(--glass-border); }
        .stat-box .val { font-size: 1.5rem; font-weight: 800; color: var(--soft-gold); }
        .stat-box .lbl { font-size: 0.8rem; color: #aaa; text-transform: uppercase; }

        .levels-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .level-card { background: rgba(255,191,0,0.05); border: 1px solid rgba(255,191,0,0.1); padding: 15px; border-radius: 12px; text-align: center; }
        .level-card h4 { color: var(--amber); margin-bottom: 5px; }

        /* Instructions Section */
        .instructions { padding: 60px 0; color: #bbb; font-size: 0.95rem; }
        .instructions h3 { color: var(--soft-gold); margin-bottom: 15px; }
        .instructions ul { list-style: none; }
        .instructions li { margin-bottom: 10px; display: flex; gap: 10px; }
        .instructions li::before { content: "✦"; color: var(--amber); }

        /* Popups */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(8px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: #1a0800;
            border: 2px solid var(--amber);
            border-radius: 24px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 0 50px rgba(255, 191, 0, 0.2);
            animation: modalPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes modalPop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* Notification */
        .notif {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--gradient-premium);
            color: #000;
            padding: 16px 30px;
            border-radius: 12px;
            font-weight: 700;
            transform: translateY(200px);
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 3000;
        }
        .notif.active { transform: translateY(0); }

        /* Footer */
        footer { padding: 60px 0; border-top: 1px solid var(--glass-border); text-align: center; }
        .footer-logo { font-size: 1.5rem; font-weight: 800; color: var(--soft-gold); margin-bottom: 20px; }

        /* Text Sections */
        .text-content { max-width: 800px; margin: 0 auto; line-height: 1.8; color: #ccc; }
        .text-content h3 { color: var(--amber); margin: 30px 0 15px; font-size: 1.5rem; }

    </style>
</head>
<body>

    <header>
        <div class="container">
            <nav>
                <div class="logo">AUVEX</div>
                <ul class="nav-links">
                    <li><a onclick="scrollToSection('hero')">Home</a></li>
                    <li><a onclick="scrollToSection('cycle')">Cycle</a></li>
                    <li><a onclick="scrollToSection('saving')">Saving</a></li>
                    <li><a onclick="scrollToSection('whitepaper')">Whitepaper</a></li>
                    <li><a onclick="scrollToSection('audit')">Audit</a></li>
                    <li><a onclick="scrollToSection('faq')">FAQ</a></li>
                </ul>
                <button class="btn-connect" id="btnConnect">Connect Wallet</button>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero -->
        <section class="hero" id="hero">
            <div class="container">
                <h1>Autonomous <span>Wealth Automation</span> <br> Institutional Yield</h1>
                <p>Auvex Protocol delivers decentralized asset management via secure algorithmic cycles and liquid savings on the Binance Smart Chain.</p>
                <div style="display: flex; gap: 20px; justify-content: center;">
                    <button class="btn-action" style="width: auto; padding: 15px 40px;" onclick="scrollToSection('cycle')">Start Cycle</button>
                    <button class="btn-action" style="width: auto; padding: 15px 40px; background: transparent; border: 1px solid var(--amber); color: var(--amber);" onclick="scrollToSection('saving')">Save & Earn</button>
                </div>
            </div>
        </section>

        <!-- Cycle Investment Section -->
        <section class="section" id="cycle">
            <div class="container">
                <div class="section-header">
                    <h2>Cycle Investment</h2>
                    <p>Execute short-term yield cycles with fixed duration and guaranteed returns.</p>
                </div>

                <div class="invest-grid">
                    <!-- Deposit Box -->
                    <div class="premium-card">
                        <div class="form-group">
                            <label>Select Duration</label>
                            <div class="input-wrapper">
                                <select id="cyclePlan">
                                    <option value="0">1 Day Cycle (100.5%)</option>
                                    <option value="1">7 Days Cycle (105%)</option>
                                    <option value="2">14 Days Cycle (110%)</option>
                                    <option value="3">30 Days Cycle (125%)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Investment Amount (USDT)</label>
                            <div class="input-wrapper">
                                <input type="number" id="cycleAmount" placeholder="Min. 5 USDT">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Upline Address</label>
                            <div class="input-wrapper">
                                <input type="text" id="cycleRef" readonly value="No Referrer">
                            </div>
                        </div>
                        <button class="btn-action" id="btnDepositCycle">Confirm Deposit</button>
                    </div>

                    <!-- Personal Dashboard -->
                    <div class="premium-card">
                        <h3 style="color: var(--soft-gold); margin-bottom: 20px;">Personal Dashboard</h3>
                        <div class="dashboard-container">
                            <table id="cycleTable">
                                <thead>
                                    <tr>
                                        <th>Status</th>
                                        <th>Amount</th>
                                        <th>Plan</th>
                                        <th>End Time</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td colspan="4" style="text-align: center;">Connect wallet to view data</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 25px;">
                            <button class="btn-action" id="btnClaimCycle" style="flex: 1;">Withdraw</button>
                            <button class="btn-action" id="btnRegrow" style="flex: 1; background: transparent; border: 1px solid var(--amber); color: var(--amber);">Regrow</button>
                        </div>
                    </div>
                </div>

                <!-- Referral Dashboard Cycle -->
                <div class="premium-card" style="margin-bottom: 40px;">
                    <h3 style="text-align: center; color: var(--soft-gold);">Referral Analytics</h3>
                    <div class="referral-stat-grid">
                        <div class="stat-box"><div class="val" id="cycleRefEarned">0.00</div><div class="lbl">Total Earned (USDT)</div></div>
                        <div class="stat-box"><div class="val" id="cycleDownlines">0</div><div class="lbl">Direct Members</div></div>
                    </div>
                    <button class="btn-action" id="btnClaimCycleRef" style="max-width: 300px; margin: 0 auto; display: block;">Withdraw Referral Rewards</button>
                    
                    <div class="levels-grid" style="margin-top: 30px;">
                        <div class="level-card"><h4>Level 1</h4><p>15% Reward</p><p id="lv1Count">0 Members</p></div>
                        <div class="level-card"><h4>Level 2</h4><p>7% Reward</p><p id="lv2Count">0 Members</p></div>
                        <div class="level-card"><h4>Level 3</h4><p>2% Reward</p><p id="lv3Count">0 Members</p></div>
                        <div class="level-card"><h4>Level 4</h4><p>1% Reward</p><p id="lv4Count">0 Members</p></div>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="instructions">
                    <h3>Cycle Protocol Mechanics</h3>
                    <ul>
                        <li>Investments are locked until the chosen duration is complete.</li>
                        <li>Principal + Profit are claimable instantly upon maturity.</li>
                        <li><strong>Referral Requirements:</strong> Level 1 requires active deposit. Levels 2-4 require 1, 3, and 5 qualified direct downlines (min 20 USDT each) respectively.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Saving Investment Section -->
        <section class="section" id="saving" style="background: rgba(255,255,255,0.02); padding: 80px 0;">
            <div class="container">
                <div class="section-header">
                    <h2>Saving Investment</h2>
                    <p>Dynamic daily yields with flexible capital withdrawal options.</p>
                </div>

                <div class="invest-grid">
                    <div class="premium-card">
                        <div class="form-group">
                            <label>Deposit Amount (USDT)</label>
                            <div class="input-wrapper">
                                <input type="number" id="savingAmount" placeholder="Min. 5 USDT">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Upline Address</label>
                            <div class="input-wrapper">
                                <input type="text" id="savingRef" readonly value="No Referrer">
                            </div>
                        </div>
                        <button class="btn-action" id="btnDepositSaving">Join Saving Pool</button>
                    </div>

                    <div class="premium-card">
                        <h3 style="color: var(--soft-gold); margin-bottom: 20px;">Savings Dashboard</h3>
                        <div class="referral-stat-grid" style="grid-template-columns: 1fr 1fr;">
                            <div class="stat-box"><div class="val" id="savingActive">0.00</div><div class="lbl">Active Capital</div></div>
                            <div class="stat-box"><div class="val" id="savingDaily">0.3% - 0.8%</div><div class="lbl">Variable ROI</div></div>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 25px;">
                            <button class="btn-action" id="btnClaimSaving" style="flex: 1;">Claim Daily ROI</button>
                            <button class="btn-action" id="btnWithdrawSavingCapital" style="flex: 1; background: transparent; border: 1px solid var(--amber); color: var(--amber);">Withdraw Capital</button>
                        </div>
                    </div>
                </div>

                <!-- Referral Dashboard Saving -->
                <div class="premium-card" style="margin-bottom: 40px;">
                    <h3 style="text-align: center; color: var(--soft-gold);">Savings Referral (10 Levels)</h3>
                    <div class="referral-stat-grid">
                        <div class="stat-box"><div class="val" id="savingRefEarned">0.00</div><div class="lbl">Total Earned</div></div>
                    </div>
                    <button class="btn-action" id="btnClaimSavingRef" style="max-width: 300px; margin: 0 auto; display: block;">Withdraw Savings Rewards</button>
                    
                    <div class="levels-grid" style="margin-top: 30px; grid-template-columns: repeat(5, 1fr);">
                        <!-- Generated levels 1-10 -->
                        <div class="level-card"><h4>L1</h4><p>20%</p></div>
                        <div class="level-card"><h4>L2</h4><p>15%</p></div>
                        <div class="level-card"><h4>L3</h4><p>8%</p></div>
                        <div class="level-card"><h4>L4</h4><p>4%</p></div>
                        <div class="level-card"><h4>L5</h4><p>2%</p></div>
                        <div class="level-card"><h4>L6</h4><p>2%</p></div>
                        <div class="level-card"><h4>L7</h4><p>1%</p></div>
                        <div class="level-card"><h4>L8</h4><p>1%</p></div>
                        <div class="level-card"><h4>L9</h4><p>1%</p></div>
                        <div class="level-card"><h4>L10</h4><p>1%</p></div>
                    </div>
                </div>

                <div class="instructions">
                    <h3>Saving Protocol Mechanics</h3>
                    <ul>
                        <li>Rewards accrue daily and can be withdrawn every 24 hours.</li>
                        <li>Base ROI is 0.3% daily, adjusting up to 0.8% based on protocol liquidity snapshots.</li>
                        <li><strong>Requirements:</strong> Each level (1-10) is unlocked based on your active deposit size (starting from 10 USDT up to 100 USDT).</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Whitepaper -->
        <section class="section" id="whitepaper" style="padding: 100px 0;">
            <div class="container">
                <div class="section-header"><h2>Whitepaper</h2></div>
                <div class="text-content">
                    <h3>1. Core Philosophy</h3>
                    <p>Auvex is a decentralized liquidity provision protocol designed to bridge the gap between volatile crypto assets and stable wealth generation. Built on the Binance Smart Chain, Auvex utilizes audited smart contracts to automate profit distribution without intermediary intervention.</p>
                    
                    <h3>2. Cycle Mechanism</h3>
                    <p>The Cycle protocol allows users to commit USDT to high-velocity liquidity pools. In exchange, the protocol provides a fixed-rate return at the end of the period. This mechanism is ideal for traders looking for predictable delta-neutral growth.</p>
                    
                    <h3>3. Saving Mechanism</h3>
                    <p>The Saving protocol operates as a dynamic liquidity buffer. Yields are calculated based on the 7-day snapshot of the protocol's total value locked (TVL). As TVL increases, the protocol adjusts the efficiency of its distribution to reward long-term holders.</p>

                    <h3>4. Security & Decentralization</h3>
                    <p>Every transaction, deposit, and withdrawal is processed on-chain. The protocol ownership is structured to be immutable, ensuring that the defined logic of rewards and referrals cannot be altered post-deployment.</p>
                </div>
            </div>
        </section>

        <!-- Audit -->
        <section class="section" id="audit" style="background: rgba(0,0,0,0.3); padding: 100px 0;">
            <div class="container">
                <div class="section-header"><h2>Security Audit</h2></div>
                <div class="text-content" style="text-align: center;">
                    <i class="fas fa-shield-halved" style="font-size: 5rem; color: var(--amber); margin-bottom: 30px;"></i>
                    <p>The Auvex Protocol smart contracts have undergone rigorous internal testing and simulated stress-testing to ensure asset integrity.</p>
                    <div style="background: rgba(255,191,0,0.1); padding: 30px; border-radius: 16px; border: 1px dashed var(--amber); margin-top: 30px;">
                        <h4 style="color: #fff;">Audit Summary: Passed</h4>
                        <p style="font-size: 0.9rem; margin-top: 10px;">• Reentrancy Guard Protection: <strong>Enabled</strong><br>• Integer Overflow/Underflow: <strong>Safe</strong><br>• Logic Vulnerability: <strong>None</strong><br>• Admin Modification Risk: <strong>Minimal (Fixed logic)</strong></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section class="section" id="faq" style="padding: 100px 0;">
            <div class="container">
                <div class="section-header"><h2>Frequently Asked Questions</h2></div>
                <div class="text-content">
                    <div class="stat-box" style="text-align: left; margin-bottom: 20px;">
                        <h4 style="color: var(--amber);">What is the minimum deposit?</h4>
                        <p>The protocol requires a minimum of 5 USDT for both Cycle and Saving plans to ensure efficient gas usage.</p>
                    </div>
                    <div class="stat-box" style="text-align: left; margin-bottom: 20px;">
                        <h4 style="color: var(--amber);">When can I withdraw my capital in Cycles?</h4>
                        <p>In the Cycle protocol, your capital and profits are available for withdrawal immediately after the duration (1, 7, 14, or 30 days) has elapsed.</p>
                    </div>
                    <div class="stat-box" style="text-align: left; margin-bottom: 20px;">
                        <h4 style="color: var(--amber);">How is the Savings ROI determined?</h4>
                        <p>Savings ROI starts at 0.3% daily. If the pool balance grows significantly over a 7-day period, the ROI increases by 0.1% weekly, up to a maximum of 0.8%.</p>
                    </div>
                    <div class="stat-box" style="text-align: left; margin-bottom: 20px;">
                        <h4 style="color: var(--amber);">Is there a fee?</h4>
                        <p>A standard 10% administrative fee is applied to deposits to cover protocol maintenance, marketing, and operational security.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-logo">AUVEX PROTOCOL</div>
            <p style="color: #666; font-size: 0.85rem;">&copy; 2024 Auvex Autonomous Protocol. Operating on Binance Smart Chain.</p>
        </div>
    </footer>

    <!-- Regrow Modal -->
    <div class="modal" id="regrowModal">
        <div class="modal-content">
            <h2 style="color: var(--amber); margin-bottom: 20px;">Regrow Cycle</h2>
            <p style="color: #ccc; margin-bottom: 20px;">Select a new duration for your matured capital and profit.</p>
            <div class="form-group">
                <select id="regrowPlan" style="width: 100%; padding: 12px; border-radius: 8px; background: #222; color: #fff; border: 1px solid var(--amber);">
                    <option value="0">1 Day Cycle (100.5%)</option>
                    <option value="1">7 Days Cycle (105%)</option>
                    <option value="2">14 Days Cycle (110%)</option>
                    <option value="3">30 Days Cycle (125%)</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn-action" id="btnConfirmRegrow">Confirm Regrow</button>
                <button class="btn-action" style="background: #333; color: #fff;" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <div class="notif" id="notification">Notification Message</div>

    <script>
        // Contract Configurations
        const CONTRACT_ADDR = "0x7F33CbE48a617192c9A8AA490708BF547f1488AD";
        const USDT_ADDR = "0x55d398326f99059fF775485246999027B3197955"; // BSC USDT
        const ABI = [{"inputs":[{"internalType":"address","name":"_usdtAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"CapitalWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"profit","type":"uint256"}],"name":"CycleClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"planType","type":"uint8"},{"indexed":false,"internalType":"address","name":"referrer","type":"address"}],"name":"NewDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"}],"name":"OwnershipRenounced","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newBalance","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"changePercent","type":"uint256"}],"name":"PoolAdjusted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"planType","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"level","type":"uint256"}],"name":"ReferralRewardPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"oldCycleId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newCycleId","type":"uint256"}],"name":"RegrowExecuted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"SavingClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ScorchReferralWithdrawn","type":"event"},{"inputs":[],"name":"ADMIN_FEE_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ADMIN_FICTITIOUS_DEPOSIT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ADMIN_REWARD_INTERVAL","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ADMIN_WALLET","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"CYCLE_DURATIONS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"CYCLE_PERCENTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"CYCLE_REF_PERCENTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"CYCLE_REF_REQUIREMENTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_DEPOSIT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SAVING_ADJUSTMENT_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SAVING_MAX_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SAVING_MIN_PERCENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"SAVING_REF_PERCENTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"SAVING_REF_REQUIREMENTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIME_STEP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"adminAccumulatedRewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"adminLastRewardTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"savingId","type":"uint256"}],"name":"capitalSaving","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"cycleId","type":"uint256"}],"name":"claimCycle","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"claimSaving","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"contractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"cycleInvestments","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"plan","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"bool","name":"claimed","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint8","name":"plan","type":"uint8"},{"internalType":"address","name":"referrer","type":"address"}],"name":"depositCycle","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"referrer","type":"address"}],"name":"depositSaving","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"downlines","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getContractStats","outputs":[{"internalType":"uint256","name":"totalInvested_","type":"uint256"},{"internalType":"uint256","name":"totalWithdrawn_","type":"uint256"},{"internalType":"uint256","name":"totalUsers_","type":"uint256"},{"internalType":"uint256","name":"contractBalance_","type":"uint256"},{"internalType":"uint256","name":"poolBalance_","type":"uint256"},{"internalType":"uint256","name":"scorchPool_","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"cycleId","type":"uint256"}],"name":"getCycleDetails","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"plan","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"uint256","name":"totalReturn","type":"uint256"},{"internalType":"uint256","name":"profit","type":"uint256"},{"internalType":"bool","name":"claimed","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"cycleId","type":"uint256"}],"name":"getCycleProfitDetails","outputs":[{"internalType":"uint256","name":"profitPer8Hours","type":"uint256"},{"internalType":"uint256","name":"timeLeft","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"savingId","type":"uint256"}],"name":"getSavingDetails","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"currentPercent","type":"uint256"},{"internalType":"uint256","name":"dailyReward","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserInfo","outputs":[{"internalType":"uint256","name":"totalInvested_","type":"uint256"},{"internalType":"uint256","name":"totalWithdrawn_","type":"uint256"},{"internalType":"uint256","name":"cycleRewards_","type":"uint256"},{"internalType":"uint256","name":"savingRewards_","type":"uint256"},{"internalType":"uint256","name":"activeInvestment_","type":"uint256"},{"internalType":"address","name":"referrer_","type":"address"},{"internalType":"uint256","name":"referrals_","type":"uint256"},{"internalType":"bool","name":"isActive_","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getUserInvestments","outputs":[{"internalType":"uint256","name":"activeCycles","type":"uint256"},{"internalType":"uint256","name":"activeSavings","type":"uint256"},{"internalType":"uint256","name":"totalCycles","type":"uint256"},{"internalType":"uint256","name":"totalSavings","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isRenounced","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"poolBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"poolSnapshots","outputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"uint256","name":"poolBalance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"qualifiedDownlineCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"cycleId","type":"uint256"},{"internalType":"uint8","name":"newPlan","type":"uint8"}],"name":"regrow","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rewardCycle","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rewardSaving","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"savingInvestments","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"currentPercent","type":"uint256"},{"internalType":"uint256","name":"lastPayout","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"scorchReferralPool","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalInvested","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalUsers","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalWithdrawn","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"usdt","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"users","outputs":[{"internalType":"address","name":"referrer","type":"address"},{"internalType":"uint256","name":"referrals","type":"uint256"},{"internalType":"uint256","name":"totalInvested","type":"uint256"},{"internalType":"uint256","name":"totalWithdrawn","type":"uint256"},{"internalType":"uint256","name":"cycleRewards","type":"uint256"},{"internalType":"uint256","name":"savingRewards","type":"uint256"},{"internalType":"uint256","name":"lastSavingClaim","type":"uint256"},{"internalType":"uint256","name":"activeInvestment","type":"bool","name":"isActive","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawScorchReferral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}];
        const ERC20_ABI = [{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"type":"function"}];

        let web3, contract, usdtToken, userAddress;

        async function init() {
            const params = new URLSearchParams(window.location.search);
            const ref = params.get('ref');
            if(ref && Web3.utils.isAddress(ref)) {
                document.getElementById('cycleRef').value = ref;
                document.getElementById('savingRef').value = ref;
            }

            if (window.ethereum) {
                web3 = new Web3(window.ethereum);
                contract = new web3.eth.Contract(ABI, CONTRACT_ADDR);
                usdtToken = new web3.eth.Contract(ERC20_ABI, USDT_ADDR);
                
                window.ethereum.on('accountsChanged', (accounts) => {
                    userAddress = accounts[0];
                    updateUI();
                });
            }
        }

        async function connect() {
            if(!window.ethereum) return notify("Install MetaMask!");
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            userAddress = accounts[0];
            document.getElementById('btnConnect').innerText = userAddress.substring(0,6) + "...";
            updateUI();
        }

        async function updateUI() {
            if(!userAddress) return;
            const info = await contract.methods.getUserInfo(userAddress).call();
            const invCount = await contract.methods.getUserInvestments(userAddress).call();
            
            // Update Stats
            document.getElementById('cycleRefEarned').innerText = web3.utils.fromWei(info.cycleRewards_, 'ether');
            document.getElementById('savingRefEarned').innerText = web3.utils.fromWei(info.savingRewards_, 'ether');
            document.getElementById('savingActive').innerText = web3.utils.fromWei(info.activeInvestment_, 'ether');
            document.getElementById('cycleDownlines').innerText = info.referrals_;

            // Load Cycle Table
            const tbody = document.querySelector('#cycleTable tbody');
            tbody.innerHTML = "";
            for(let i=0; i<invCount.totalCycles; i++) {
                const det = await contract.methods.getCycleDetails(userAddress, i).call();
                if(!det.claimed) {
                    const row = `<tr>
                        <td>Active</td>
                        <td>${web3.utils.fromWei(det.amount, 'ether')}</td>
                        <td>${det.plan}</td>
                        <td>${new Date(det.endTime * 1000).toLocaleDateString()}</td>
                    </tr>`;
                    tbody.innerHTML += row;
                }
            }
        }

        async function depositCycle() {
            const amount = document.getElementById('cycleAmount').value;
            const plan = document.getElementById('cyclePlan').value;
            const ref = document.getElementById('cycleRef').value == "No Referrer" ? "0x0000000000000000000000000000000000000000" : document.getElementById('cycleRef').value;
            
            if(amount < 5) return notify("Minimum 5 USDT Required!");

            const wei = web3.utils.toWei(amount.toString(), 'ether');
            await checkApprove(wei);
            contract.methods.depositCycle(wei, plan, ref).send({from: userAddress})
                .on('transactionHash', () => notify("Transaction Sent..."))
                .on('receipt', () => { notify("Deposit Successful!"); updateUI(); });
        }

        async function checkApprove(amount) {
            const allowance = await usdtToken.methods.allowance(userAddress, CONTRACT_ADDR).call();
            if(new BigNumber(allowance).isLessThan(amount)) {
                await usdtToken.methods.approve(CONTRACT_ADDR, "115792089237316195423570985008687907853269984665640564039457584007913129639935").send({from: userAddress});
            }
        }

        // Navigation
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        function notify(msg) {
            const n = document.getElementById('notification');
            n.innerText = msg;
            n.classList.add('active');
            setTimeout(() => n.classList.remove('active'), 3000);
        }

        function openModal() { document.getElementById('regrowModal').style.display = 'flex'; }
        function closeModal() { document.getElementById('regrowModal').style.display = 'none'; }

        document.getElementById('btnConnect').addEventListener('click', connect);
        document.getElementById('btnDepositCycle').addEventListener('click', depositCycle);
        document.getElementById('btnRegrow').addEventListener('click', openModal);

        init();
    </script>
</body>
</html>
